# üöÄ Release Notes - HYPE-MACRO Store v2.1.0

**Release Date**: 2025-11-07  
**Branch**: `main`  
**Type**: Minor Release ‚Äî Feature & Improvements  
**Based on**: Changes since v2.0.0 (merged from React+Nestjs)

---

## üåü Overview

Version **v2.1.0** is a minor release focused on key user-facing features and performance improvements built on top of v2.0.0. This release adds Pagination, Email Notifications, Advanced Search & Filters, and Basic Analytics. It also includes multiple bug fixes, small API enhancements, and developer experience improvements.

This document highlights what changed compared to v2.0.0, upgrade instructions, API additions, database changes, and known issues.

---

## üéØ Summary of Changes (Compared to v2.0.0)

### Major Additions
- üßæ Pagination system for product listings (frontend + backend)
- ‚úâÔ∏è Email notifications (registration, order confirmation stubs) with SMTP support
- üîé Advanced Search & Filters (by name, category, price, features)
- üìä Basic Analytics endpoints (page views, product views)

### Improvements
- ‚ö° Backend: optimized product list queries and added indexing for frequently queried fields
- ‚ö° Frontend: improved product list rendering and UI for pagination and filters
- üîê Security: small auth hardening and token validation improvements
- üß™ Tests: added unit tests for pagination and search
- üß∞ Dev: improved README and added environment configuration examples for email & analytics

### Bug Fixes
- üîß Fixed issues with product sorting when combined with filters
- üîß Fixed race condition in seeding script
- üîß Fixed small UI layout regressions introduced in v2.0.0 animations

---

## üîå New / Changed API Endpoints

All new endpoints are prefixed under existing resources where applicable.

### Products (pagination & search)
```
GET /api/products?limit=20&page=1&sort=price:asc&search=mouse&category=gaming
# Returns paginated result with meta: { total, page, limit, totalPages }
```

```
GET /api/products/:id          # unchanged
POST /api/products             # unchanged (Admin)
PUT /api/products/:id          # unchanged (Admin)
DELETE /api/products/:id       # unchanged (Admin)
```

### Search & Filters (advanced)
```
GET /api/search/products?query=...&category=...&minPrice=...&maxPrice=...&features=...&sort=...
# Supports multiple filters and full-text search on name/description
```

### Notifications / Email
```
POST /api/notifications/send          # Internal endpoint to send templated emails (SMTP)
GET  /api/notifications/templates     # List available templates (dev)
```

> Note: Email sending requires SMTP credentials in backend env (see Upgrade Notes).

### Analytics
```
POST /api/analytics/event             # Record an event (page_view, product_view)
GET  /api/analytics/product/:id       # Get basic metrics for a product
GET  /api/analytics/site              # Get aggregated site metrics (last 7/30 days)
```

---

## üóÑÔ∏è Database Changes

- ‚úÖ New collection: `notifications` (stores queued/sent email logs)
- ‚úÖ New collection: `analytics` (basic event storage)
- ‚úÖ New indexes on `products`:
  - `category` (asc)
  - `price` (asc)
  - text index on `name` and `description` for full-text search

Migration: Existing deployments should run the seed/migration script included in `Nestjs/scripts` or run seeding with `npm run seed` after setting env variables.

---

## üîß Upgrade / Migration Guide (from v2.0.0 ‚Üí v2.1.0)

1. Pull latest main branch and rebuild both apps:
```bash
git checkout main
git pull origin main

# Backend
cd Nestjs
npm install
# Ensure .env contains SMTP and ANALYTICS settings (see example below)
npm run build
npm run start:prod

# Frontend
cd ../React
npm install
npm run build
```

2. Update environment variables for backend `.env` (add these):
```
# SMTP / Email
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=you@example.com
SMTP_PASS=super-secret
EMAIL_FROM="HYPE-MACRO <no-reply@yourdomain.com>"

# Analytics
ANALYTICS_ENABLED=true
ANALYTICS_RETENTION_DAYS=90
```

3. Run migrations/seed (optional but recommended):
```bash
cd Nestjs
npm run seed
```

4. Restart services (or redeploy). Verify health endpoints and test flows:
- Register a user and confirm email triggering (check logs or SMTP inbox)
- Browse product pages and confirm analytics events recorded
- Test product listing with pagination & filters

---

## üß™ Testing

- Backend unit & integration tests added for pagination and search:
```bash
cd Nestjs
npm run test
npm run test:e2e
```

- Frontend: manual verification for pagination, search, and email-triggered flows

---

## üêõ Known Issues & Notes

- ‚ö†Ô∏è Email deliverability depends on correct SMTP settings and may require domain/SPF/DKIM setup
- ‚ö†Ô∏è Analytics are basic and built for low-to-medium traffic; for high traffic, switch to event pipeline (e.g., external analytics service)
- ‚ö†Ô∏è Pagination default limit set to 20; adjust via query param `limit`
- ‚ö†Ô∏è Some UI animations still have small reflow on very small screens; a fix is planned in v2.2.0

---

## üß≠ Roadmap items enabled by this release

- Pagination & filtering (completed)
- Email notifications (basic templates and SMTP) (completed)
- Advanced search (basic full-text + filters) (completed)
- Basic analytics & metrics (completed)

Planned next items (v2.2.0+):
- Email templates UI in Admin Dashboard
- Analytics dashboard UI with charts
- Pagination infinite-scroll option
- Improved image upload & CDN storage

---

## üë• Contributors

- **@xenodeve** - Lead Developer
- **@DulyapatX** - Backend improvements & seeding

---

## üìé References
- See v2.0.0 release notes: `.github/release_notes/v2.0.0.md`
- Pull Request that merged React+Nestjs: https://github.com/xenodeve/Hype-Macro_Store/pull/4

---

**Release**: v2.1.0  
**Date**: 2025-11-07  
**Status**: ‚úÖ Ready for production
