# ğŸ“Š Data Flow - à¸£à¸°à¸šà¸š E-Commerce Hype Macro

## ğŸ—ï¸ à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š (System Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        React Frontend                            â”‚
â”‚                     (http://localhost:5173)                      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Components  â”‚  â”‚ Redux Store  â”‚  â”‚   Services   â”‚          â”‚
â”‚  â”‚   (UI Layer) â”‚â†â†’â”‚  (State Mgr) â”‚â†â†’â”‚ (API Calls)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                               â†“                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   HTTP/REST API   â”‚
                                    â”‚  (CORS Enabled)   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       NestJS Backend                             â”‚
â”‚                     (http://localhost:3000)                      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Controllers  â”‚â†’ â”‚   Services   â”‚â†’ â”‚   Schemas    â”‚          â”‚
â”‚  â”‚ (API Routes) â”‚  â”‚(Business Log)â”‚  â”‚  (Models)    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                               â†“                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  JWT Guards  â”‚  â”‚DTO Validationâ”‚  â”‚   Mongoose   â”‚          â”‚
â”‚  â”‚  (Security)  â”‚  â”‚  (Pipe)      â”‚  â”‚   (ODM)      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                               â†“                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MongoDB Database                             â”‚
â”‚                  (mongodb://localhost:27017)                     â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚    users     â”‚  â”‚   products   â”‚  â”‚    orders    â”‚          â”‚
â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ Database (MongoDB Collections)

### 1. ğŸ‘¤ **users** Collection
```javascript
{
  _id: ObjectId("..."),
  // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸·à¹‰à¸™à¸à¸²à¸™
  name: "à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰",
  email: "user@example.com",        // unique
  password: "$2b$10$hash...",        // bcrypt hash
  role: "user",                      // "user" à¸«à¸£à¸·à¸­ "admin"
  
  // à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸ˆà¸±à¸”à¸ªà¹ˆà¸‡
  phone: "0812345678",
  address: "123 à¸–à¸™à¸™à¸ªà¸¸à¸‚à¸¸à¸¡à¸§à¸´à¸—",
  district: "à¸„à¸¥à¸­à¸‡à¹€à¸•à¸¢",
  city: "à¸§à¸±à¸’à¸™à¸²",
  province: "à¸à¸£à¸¸à¸‡à¹€à¸—à¸à¸¡à¸«à¸²à¸™à¸„à¸£",
  postalCode: "10110",
  
  // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸•à¸£ (à¹€à¸à¹‡à¸šà¹à¸„à¹ˆ 4 à¸«à¸¥à¸±à¸à¸—à¹‰à¸²à¸¢)
  cardName: "MR. SOMCHAI",
  cardLast4: "1234",
  cardExpiry: "12/25",
  
  // Timestamps à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
  createdAt: ISODate("..."),
  updatedAt: ISODate("...")
}
```

### 2. ğŸ›ï¸ **products** Collection
```javascript
{
  _id: ObjectId("..."),
  id: "razer-viper-v3",              // custom ID (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ _id)
  name: "Razer Viper V3 Pro",
  price: 5990,                        // à¸£à¸²à¸„à¸² (à¸šà¸²à¸—)
  image: "https://...",               // URL à¸£à¸¹à¸›à¸ à¸²à¸
  description: "Gaming Mouse...",
  stock: 50,                          // à¸ˆà¸³à¸™à¸§à¸™à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­
  category: "mouse",                  // à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
  isActive: true,                     // à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¸à¸²à¸£à¸‚à¸²à¸¢
  
  createdAt: ISODate("..."),
  updatedAt: ISODate("...")
}
```

### 3. ğŸ“¦ **orders** Collection
```javascript
{
  _id: ObjectId("..."),
  userId: ObjectId("..."),            // à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡ users._id
  orderId: "ORD-1730476800123",       // à¸£à¸«à¸±à¸ªà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (unique)
  
  // à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
  items: [
    {
      productId: "razer-viper-v3",
      name: "Razer Viper V3 Pro",
      price: 5990,
      qty: 2,
      image: "https://..."
    }
  ],
  
  // à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸ˆà¸±à¸”à¸ªà¹ˆà¸‡
  address: {
    fullName: "à¸™à¸²à¸¢à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ",
    phone: "0812345678",
    address: "123 à¸–à¸™à¸™à¸ªà¸¸à¸‚à¸¸à¸¡à¸§à¸´à¸—",
    district: "à¸„à¸¥à¸­à¸‡à¹€à¸•à¸¢",
    province: "à¸à¸£à¸¸à¸‡à¹€à¸—à¸à¸¡à¸«à¸²à¸™à¸„à¸£",
    postalCode: "10110"
  },
  
  paymentMethod: "card",              // "card" à¸«à¸£à¸·à¸­ "qr"
  subtotal: 11980,                    // à¸¢à¸­à¸”à¸£à¸§à¸¡
  status: "pending",                  // à¸ªà¸–à¸²à¸™à¸°à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
  
  createdAt: ISODate("..."),
  updatedAt: ISODate("...")
}
```

---

## ğŸ”„ Data Flow à¹à¸šà¹ˆà¸‡à¸•à¸²à¸¡ Feature

### ğŸ” **1. Authentication Flow (à¸à¸²à¸£à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™)**

#### ğŸ“ Register (à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User à¸à¸£à¸­à¸  â”‚
â”‚   Register   â”‚
â”‚    Form      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ { name, email, password }
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React: Register Component                    â”‚
â”‚ â”œâ”€ dispatch(register(data))                  â”‚
â”‚ â””â”€ authSlice.ts: register async thunk        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ POST /auth/register
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NestJS: AuthController                       â”‚
â”‚ â”œâ”€ @Post('register')                         â”‚
â”‚ â””â”€ ValidationPipe à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š RegisterDto       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AuthService.register()                       â”‚
â”‚ â”œâ”€ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š email à¸‹à¹‰à¸³à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ                 â”‚
â”‚ â”œâ”€ UsersService.create() â† à¸ªà¸£à¹‰à¸²à¸‡ user       â”‚
â”‚ â”‚  â””â”€ bcrypt.hash(password) â† hash à¸£à¸«à¸±à¸ª     â”‚
â”‚ â””â”€ JwtService.sign() â† à¸ªà¸£à¹‰à¸²à¸‡ JWT token      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MongoDB: users collection                    â”‚
â”‚ â””â”€ INSERT { name, email, password(hash)... } â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ { user, token }
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React: authSlice                             â”‚
â”‚ â”œâ”€ state.user = user                         â”‚
â”‚ â”œâ”€ state.token = token                       â”‚
â”‚ â”œâ”€ localStorage.setItem('auth', ...)         â”‚
â”‚ â””â”€ Redirect à¹„à¸› /                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ”‘ Login (à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š)
```
User à¸à¸£à¸­à¸ Login Form
  â†“ { email, password }
dispatch(login(data))
  â†“ POST /auth/login
AuthController â†’ AuthService.login()
  â”œâ”€ findByEmail() â† à¸«à¸² user
  â”œâ”€ bcrypt.compare() â† à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™
  â””â”€ JwtService.sign() â† à¸ªà¸£à¹‰à¸²à¸‡ token
  â†“ { user, token }
authSlice: à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¸‡ state + localStorage
  â†“
Redirect à¹„à¸› /
```

#### ğŸ”’ Protected Routes (à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡ Login)
```
User à¹€à¸‚à¹‰à¸² /profile à¸«à¸£à¸·à¸­ /checkout
  â†“
React: à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š state.auth.token
  â”œâ”€ à¸¡à¸µ token â†’ à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸•à¹ˆà¸­
  â””â”€ à¹„à¸¡à¹ˆà¸¡à¸µ â†’ Redirect à¹„à¸› /login
  â†“
API Call: GET /auth/profile
  â”œâ”€ Headers: { Authorization: "Bearer <token>" }
  â†“
NestJS: @UseGuards(JwtAuthGuard)
  â”œâ”€ JwtStrategy.validate() â† à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š token
  â”œâ”€ à¸–à¸­à¸”à¸£à¸«à¸±à¸ª payload { sub: userId }
  â””â”€ à¸«à¸² user à¸ˆà¸²à¸ userId
  â†“
Return user data â†’ à¹à¸ªà¸”à¸‡à¹ƒà¸™ UI
```

---

### ğŸ›’ **2. Product Management Flow (à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²)**

#### ğŸ“‹ à¸”à¸¹à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
```
User à¹€à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¹à¸£à¸ (HomePage)
  â†“
useEffect() â†’ dispatch(fetchProducts())
  â†“ GET /products
ProductsController.findAll()
  â†“
ProductsService.findAll()
  â”œâ”€ productModel.find().exec()
  â””â”€ Transform _id â†’ id (à¸ªà¸³à¸«à¸£à¸±à¸š frontend)
  â†“
MongoDB: products collection
  â””â”€ SELECT * FROM products WHERE isActive=true
  â†“ [ {...products} ]
productsSlice: state.products.items = data
  â†“
React: à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸”à¹‰à¸§à¸¢ ProductCard
```

#### ğŸ” à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸ªà¸´à¸™à¸„à¹‰à¸²
```
User à¸„à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸²
  â†“ productId
GET /products/:id
  â†“
ProductsService.findOne(id)
  â””â”€ productModel.findById(id).exec()
  â†“
MongoDB: products.findOne({ _id: id })
  â†“ { product details }
à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸´à¸™à¸„à¹‰à¸² + à¸›à¸¸à¹ˆà¸¡ Add to Cart
```

---

### ğŸ›ï¸ **3. Shopping Cart Flow (à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²)**

#### â• à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸´à¸™à¸„à¹‰à¸²à¹€à¸‚à¹‰à¸²à¸•à¸°à¸à¸£à¹‰à¸²
```
User à¸„à¸¥à¸´à¸ "Add to Cart"
  â†“ { id, name, price, image, qty }
dispatch(addItem(product))
  â†“
cartSlice.addItem()
  â”œâ”€ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸¡à¸µà¸ªà¸´à¸™à¸„à¹‰à¸²à¸™à¸µà¹‰à¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸²à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
  â”‚  â”œâ”€ à¸¡à¸µà¹à¸¥à¹‰à¸§ â†’ à¹€à¸à¸´à¹ˆà¸¡ qty
  â”‚  â””â”€ à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µ â†’ à¹€à¸à¸´à¹ˆà¸¡à¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸«à¸¡à¹ˆ
  â””â”€ localStorage.setItem('cart', items)
  â†“
state.cart.items = [...items]
  â†“
UI à¸­à¸±à¸à¹€à¸”à¸•: Cart Badge à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸´à¸™à¸„à¹‰à¸²
```

#### âœï¸ à¹à¸à¹‰à¹„à¸‚à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸´à¸™à¸„à¹‰à¸²
```
User à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸³à¸™à¸§à¸™à¹ƒà¸™ Cart
  â†“ { id, qty }
dispatch(updateQty({ id, qty }))
  â†“
cartSlice.updateQty()
  â”œâ”€ à¸«à¸² item à¸”à¹‰à¸§à¸¢ id
  â”œâ”€ à¸­à¸±à¸à¹€à¸”à¸• qty (à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ = 1)
  â””â”€ localStorage.setItem('cart', items)
  â†“
UI à¸­à¸±à¸à¹€à¸”à¸•: à¸£à¸²à¸„à¸²à¸£à¸§à¸¡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™
```

#### âŒ à¸¥à¸šà¸ªà¸´à¸™à¸„à¹‰à¸²à¸­à¸­à¸à¸ˆà¸²à¸à¸•à¸°à¸à¸£à¹‰à¸²
```
User à¸„à¸¥à¸´à¸ "Remove"
  â†“ productId
dispatch(removeItem(id))
  â†“
cartSlice.removeItem()
  â”œâ”€ filter à¸­à¸­à¸ item à¸—à¸µà¹ˆà¸¡à¸µ id à¸•à¸£à¸‡à¸à¸±à¸™
  â””â”€ localStorage.setItem('cart', items)
  â†“
UI à¸­à¸±à¸à¹€à¸”à¸•: à¸ªà¸´à¸™à¸„à¹‰à¸²à¸«à¸²à¸¢à¸ˆà¸²à¸ Cart
```

---

### ğŸ’³ **4. Checkout & Order Flow (à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™)**

#### ğŸ“® à¸à¸£à¸­à¸à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸ˆà¸±à¸”à¸ªà¹ˆà¸‡
```
User à¸à¸£à¸­à¸à¸Ÿà¸­à¸£à¹Œà¸¡à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ
  â†“ { fullName, phone, address, district, province, postcode }
dispatch(setShippingAddress(address))
  â†“
checkoutSlice.setShippingAddress()
  â”œâ”€ state.shippingAddress = address
  â”œâ”€ à¹€à¸à¸´à¹ˆà¸¡à¹€à¸‚à¹‰à¸² savedAddresses (à¸–à¹‰à¸²à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µ)
  â””â”€ localStorage.setItem('checkout', state)
  â†“
à¹„à¸›à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸› (Payment)
```

#### ğŸ’° à¹€à¸¥à¸·à¸­à¸à¸§à¸´à¸˜à¸µà¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
```
User à¹€à¸¥à¸·à¸­à¸ Payment Method (Card/QR)
  â†“ "card" | "qr"
dispatch(setPaymentMethod(method))
  â†“
checkoutSlice.setPaymentMethod()
  â””â”€ state.paymentMethod = method
  â†“
à¹à¸ªà¸”à¸‡à¸«à¸™à¹‰à¸²à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
```

#### âœ… à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
```
User à¸„à¸¥à¸´à¸ "Place Order"
  â†“
à¸ªà¸£à¹‰à¸²à¸‡ Order Payload:
  â”œâ”€ orderId: "ORD-{timestamp}"
  â”œâ”€ items: à¸ˆà¸²à¸ state.cart.items
  â”œâ”€ address: à¸ˆà¸²à¸ state.checkout.shippingAddress
  â”œâ”€ paymentMethod: à¸ˆà¸²à¸ state.checkout.paymentMethod
  â””â”€ subtotal: à¸„à¸³à¸™à¸§à¸“à¸ˆà¸²à¸ cart
  â†“ POST /orders (with JWT token)
OrdersController.create()
  â”œâ”€ @UseGuards(JwtAuthGuard) â† à¸•à¹‰à¸­à¸‡ login
  â”œâ”€ Extract userId à¸ˆà¸²à¸ JWT
  â””â”€ OrdersService.create(userId, orderDto)
  â†“
orderModel.save({ userId, orderId, items, ... })
  â†“
MongoDB: orders collection
  â””â”€ INSERT new order
  â†“ { order }
React:
  â”œâ”€ dispatch(clearCart()) â† à¸¥à¹‰à¸²à¸‡à¸•à¸°à¸à¸£à¹‰à¸²
  â”œâ”€ dispatch(clearCheckout()) â† à¸¥à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ checkout
  â””â”€ Redirect à¹„à¸› /payment-success?orderId=...
```

#### ğŸ“œ à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
```
User à¹€à¸‚à¹‰à¸² Profile â†’ My Orders
  â†“ GET /orders/my-orders (with JWT)
OrdersController.getMyOrders()
  â”œâ”€ Extract userId à¸ˆà¸²à¸ JWT
  â””â”€ OrdersService.findByUserId(userId)
  â†“
MongoDB: orders.find({ userId }).sort({ createdAt: -1 })
  â†“ [ {...orders} ]
à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
```

---

### ğŸ‘¤ **5. User Profile Flow (à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ)**

#### ğŸ“Š à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
```
User à¹€à¸‚à¹‰à¸² /profile
  â†“ GET /auth/profile (with JWT)
AuthController.getProfile()
  â”œâ”€ @UseGuards(JwtAuthGuard)
  â””â”€ AuthService.getProfile(userId)
  â†“
UsersService.findById(userId)
  â†“
MongoDB: users.findOne({ _id: userId })
  â†“ { user data }
à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ Profile Component
```

#### âœï¸ à¹à¸à¹‰à¹„à¸‚à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ
```
User à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ Profile Form
  â†“ { name, phone, address, cardName, ... }
PUT /users/profile (with JWT)
  â†“
UsersController.updateProfile()
  â”œâ”€ Extract userId à¸ˆà¸²à¸ JWT
  â””â”€ UsersService.updateProfile(userId, updateDto)
  â†“
à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š:
  â”œâ”€ à¸–à¹‰à¸²à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ email â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‹à¹‰à¸³
  â”œâ”€ à¸–à¹‰à¸²à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ â†’ à¸•à¹‰à¸­à¸‡à¹ƒà¸ªà¹ˆ currentPassword
  â”‚  â””â”€ bcrypt.compare() â† à¸¢à¸·à¸™à¸¢à¸±à¸™à¸£à¸«à¸±à¸ªà¹€à¸”à¸´à¸¡
  â””â”€ bcrypt.hash(newPassword) â† hash à¸£à¸«à¸±à¸ªà¹ƒà¸«à¸¡à¹ˆ
  â†“
MongoDB: users.findByIdAndUpdate(userId, updateData)
  â†“ { updated user }
React:
  â”œâ”€ dispatch(setUser(user)) â† à¸­à¸±à¸à¹€à¸”à¸• Redux state
  â””â”€ à¹à¸ªà¸”à¸‡ success message
```

#### ğŸ—‘ï¸ à¸¥à¸šà¸šà¸±à¸à¸Šà¸µ
```
User à¸„à¸¥à¸´à¸ "Delete Account"
  â†“ à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸¢à¸·à¸™à¸¢à¸±à¸™
DELETE /users/account (with JWT + password)
  â†“
UsersService.deleteAccount(userId, password)
  â”œâ”€ à¸¢à¸·à¸™à¸¢à¸±à¸™à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™
  â””â”€ userModel.findByIdAndDelete(userId)
  â†“
MongoDB: users.deleteOne({ _id: userId })
  â†“
React:
  â”œâ”€ dispatch(logout()) â† à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸š
  â””â”€ Redirect à¹„à¸› /login
```

---

## ğŸ”’ Security & Validation Flow

### ğŸ›¡ï¸ JWT Authentication
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User Login/Register                      â”‚
â”‚    â””â”€ Backend à¸ªà¸£à¹‰à¸²à¸‡ JWT Token               â”‚
â”‚       Payload: { sub: userId, email, name } â”‚
â”‚       Secret: à¸ˆà¸²à¸ environment variable      â”‚
â”‚       Expiration: à¸•à¸²à¸¡à¸à¸³à¸«à¸™à¸” (à¹€à¸Šà¹ˆà¸™ 7 à¸§à¸±à¸™)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Frontend à¹€à¸à¹‡à¸š Token                      â”‚
â”‚    â”œâ”€ Redux State: state.auth.token         â”‚
â”‚    â””â”€ localStorage: à¹ƒà¸«à¹‰à¸„à¸‡à¸­à¸¢à¸¹à¹ˆà¸«à¸¥à¸±à¸‡ refresh   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. API Calls à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£ Authentication      â”‚
â”‚    Headers: {                                â”‚
â”‚      Authorization: "Bearer <token>"         â”‚
â”‚    }                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Backend Verification                     â”‚
â”‚    @UseGuards(JwtAuthGuard)                 â”‚
â”‚    â”œâ”€ JwtStrategy.validate()                â”‚
â”‚    â”œâ”€ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š token signature               â”‚
â”‚    â”œâ”€ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š expiration                    â”‚
â”‚    â””â”€ à¸–à¸­à¸”à¸£à¸«à¸±à¸ª payload â†’ userId              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£ API Request                    â”‚
â”‚    â””â”€ à¹ƒà¸Šà¹‰ userId à¸ˆà¸²à¸ JWT payload            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… DTO Validation Pipeline
```
Client à¸ªà¹ˆà¸‡ Request
  â†“
NestJS ValidationPipe (Global)
  â”œâ”€ à¹à¸›à¸¥à¸‡ plain object â†’ class instance
  â”œâ”€ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š class-validator decorators:
  â”‚  â”œâ”€ @IsEmail() â†’ à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™ email format
  â”‚  â”œâ”€ @IsString() â†’ à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™ string
  â”‚  â”œâ”€ @IsNumber() â†’ à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™ number
  â”‚  â”œâ”€ @MinLength(6) â†’ à¸„à¸§à¸²à¸¡à¸¢à¸²à¸§à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³
  â”‚  â””â”€ @IsOptional() â†’ field à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š
  â””â”€ à¸–à¹‰à¸²à¸œà¹ˆà¸²à¸™ â†’ à¸ªà¹ˆà¸‡à¸•à¹ˆà¸­à¹„à¸› Controller
     à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸œà¹ˆà¸²à¸™ â†’ Return 400 Bad Request
```

---

## ğŸ’¾ Data Persistence (à¸à¸²à¸£à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥)

### ğŸŒ Frontend (React)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ localStorage                                â”‚
â”‚ â”œâ”€ "auth"                                   â”‚
â”‚ â”‚  â””â”€ { user, token }                       â”‚
â”‚ â”œâ”€ "cart"                                   â”‚
â”‚ â”‚  â””â”€ [ {id, name, price, qty}... ]         â”‚
â”‚ â””â”€ "checkout"                               â”‚
â”‚    â””â”€ { shippingAddress, paymentMethod }    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†• sync with
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redux Store (In-Memory)                     â”‚
â”‚ â”œâ”€ auth: { user, token, status, error }    â”‚
â”‚ â”œâ”€ cart: { items }                          â”‚
â”‚ â”œâ”€ checkout: { shippingAddress, ... }      â”‚
â”‚ â””â”€ products: { items, status, error }      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ—„ï¸ Backend (NestJS + MongoDB)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MongoDB (Persistent Storage)                â”‚
â”‚ â”œâ”€ users collection                         â”‚
â”‚ â”‚  â””â”€ Index: { email: 1 } unique            â”‚
â”‚ â”œâ”€ products collection                      â”‚
â”‚ â”‚  â””â”€ Index: { id: 1 } unique (custom)      â”‚
â”‚ â””â”€ orders collection                        â”‚
â”‚    â”œâ”€ Index: { userId: 1 }                  â”‚
â”‚    â””â”€ Index: { orderId: 1 } unique          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†• Mongoose ODM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mongoose Models (In-Memory Cache)           â”‚
â”‚ â”œâ”€ UserModel                                â”‚
â”‚ â”œâ”€ ProductModel                             â”‚
â”‚ â””â”€ OrderModel                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Complete User Journey Example

### ğŸ“± à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¸‹à¸·à¹‰à¸­à¸ªà¸´à¸™à¸„à¹‰à¸²à¸„à¸£à¸šà¸§à¸‡à¸ˆà¸£

```
1ï¸âƒ£ à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸
   User â†’ Register Form â†’ POST /auth/register
   â†’ MongoDB: INSERT users
   â†’ Return { user, token }
   â†’ localStorage + Redux State
   â†’ Redirect à¹„à¸›à¸«à¸™à¹‰à¸²à¹à¸£à¸

2ï¸âƒ£ à¸”à¸¹à¸ªà¸´à¸™à¸„à¹‰à¸²
   HomePage â†’ GET /products
   â†’ MongoDB: products.find({ isActive: true })
   â†’ à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²

3ï¸âƒ£ à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸´à¸™à¸„à¹‰à¸²à¹€à¸‚à¹‰à¸²à¸•à¸°à¸à¸£à¹‰à¸²
   Click "Add to Cart" â†’ dispatch(addItem())
   â†’ localStorage: cart
   â†’ Badge à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™

4ï¸âƒ£ à¹€à¸Šà¹‡à¸„à¹€à¸­à¸²à¸—à¹Œ
   Click "Checkout" â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Login
   â†’ à¸à¸£à¸­à¸à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ â†’ dispatch(setShippingAddress())
   â†’ à¹€à¸¥à¸·à¸­à¸à¸§à¸´à¸˜à¸µà¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™ â†’ dispatch(setPaymentMethod())

5ï¸âƒ£ à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
   Click "Place Order" â†’ POST /orders
   â†’ MongoDB: INSERT orders
   â†’ dispatch(clearCart())
   â†’ Redirect /payment-success

6ï¸âƒ£ à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
   Profile â†’ My Orders â†’ GET /orders/my-orders
   â†’ MongoDB: orders.find({ userId })
   â†’ à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
```

---

## ğŸ“Š API Endpoints Summary

### ğŸ” Authentication
- `POST /auth/register` - à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸
- `POST /auth/login` - à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
- `GET /auth/profile` - à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ profile (à¸•à¹‰à¸­à¸‡ JWT)

### ğŸ‘¤ Users
- `GET /users/profile` - à¸”à¸¹à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ (à¸•à¹‰à¸­à¸‡ JWT)
- `PUT /users/profile` - à¹à¸à¹‰à¹„à¸‚à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ (à¸•à¹‰à¸­à¸‡ JWT)
- `DELETE /users/account` - à¸¥à¸šà¸šà¸±à¸à¸Šà¸µ (à¸•à¹‰à¸­à¸‡ JWT)

### ğŸ›ï¸ Products
- `GET /products` - à¸”à¸¹à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- `GET /products/:id` - à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸ªà¸´à¸™à¸„à¹‰à¸²
- `POST /products` - à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸´à¸™à¸„à¹‰à¸² (Admin)
- `PUT /products/:id` - à¹à¸à¹‰à¹„à¸‚à¸ªà¸´à¸™à¸„à¹‰à¸² (Admin)
- `DELETE /products/:id` - à¸¥à¸šà¸ªà¸´à¸™à¸„à¹‰à¸² (Admin)

### ğŸ“¦ Orders
- `POST /orders` - à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (à¸•à¹‰à¸­à¸‡ JWT)
- `GET /orders/my-orders` - à¸”à¸¹à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡ (à¸•à¹‰à¸­à¸‡ JWT)
- `GET /orders/:orderId` - à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (à¸•à¹‰à¸­à¸‡ JWT)

---

## ğŸ¯ Key Technologies

### Frontend
- **React** - UI Framework
- **Redux Toolkit** - State Management
- **Axios** - HTTP Client
- **React Router** - Navigation
- **Tailwind CSS** - Styling

### Backend
- **NestJS** - Framework
- **Mongoose** - MongoDB ODM
- **JWT** - Authentication
- **bcrypt** - Password Hashing
- **class-validator** - DTO Validation

### Database
- **MongoDB** - NoSQL Database
- **Collections**: users, products, orders

---

## ğŸ”„ State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Redux Store                       â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  authSlice   â”‚  â”‚  cartSlice   â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚ user         â”‚  â”‚ items[]      â”‚               â”‚
â”‚  â”‚ token        â”‚  â”‚              â”‚               â”‚
â”‚  â”‚ status       â”‚  â”‚ Persist â†”    â”‚               â”‚
â”‚  â”‚ error        â”‚  â”‚ localStorage â”‚               â”‚
â”‚  â”‚              â”‚  â”‚              â”‚               â”‚
â”‚  â”‚ Actions:     â”‚  â”‚ Actions:     â”‚               â”‚
â”‚  â”‚ â€¢ login()    â”‚  â”‚ â€¢ addItem()  â”‚               â”‚
â”‚  â”‚ â€¢ register() â”‚  â”‚ â€¢ removeItem()â”‚              â”‚
â”‚  â”‚ â€¢ logout()   â”‚  â”‚ â€¢ updateQty()â”‚               â”‚
â”‚  â”‚ â€¢ setUser()  â”‚  â”‚ â€¢ clearCart()â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚checkoutSlice â”‚  â”‚productsSlice â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚ shipping     â”‚  â”‚ items[]      â”‚               â”‚
â”‚  â”‚ Address      â”‚  â”‚ status       â”‚               â”‚
â”‚  â”‚ payment      â”‚  â”‚ error        â”‚               â”‚
â”‚  â”‚ Method       â”‚  â”‚              â”‚               â”‚
â”‚  â”‚              â”‚  â”‚ Async:       â”‚               â”‚
â”‚  â”‚ Persist â†”    â”‚  â”‚ â€¢ fetchProd  â”‚               â”‚
â”‚  â”‚ localStorage â”‚  â”‚   ucts()     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†•                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              React Components                        â”‚
â”‚  useSelector() â† à¸­à¹ˆà¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥                         â”‚
â”‚  useDispatch() â† dispatch actions                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ à¸ªà¸£à¸¸à¸›

à¸£à¸°à¸šà¸šà¸™à¸µà¹‰à¹€à¸›à¹‡à¸™ **Full-Stack E-Commerce** à¸—à¸µà¹ˆà¸›à¸£à¸°à¸à¸­à¸šà¸”à¹‰à¸§à¸¢:

1. **Frontend (React)**: à¸ˆà¸±à¸”à¸à¸²à¸£ UI, State, à¹à¸¥à¸°à¸•à¸´à¸”à¸•à¹ˆà¸­ Backend à¸œà¹ˆà¸²à¸™ REST API
2. **Backend (NestJS)**: à¸ˆà¸±à¸”à¸à¸²à¸£ Business Logic, Authentication, à¹à¸¥à¸° Database
3. **Database (MongoDB)**: à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Users, Products, Orders

**Data Flow** à¸«à¸¥à¸±à¸à¸„à¸·à¸­:
- User à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ â†’ React Component
- Dispatch Redux Action â†’ Call API Service
- HTTP Request â†’ NestJS Controller â†’ Service
- Mongoose Model â†’ MongoDB CRUD
- Response à¸à¸¥à¸±à¸šà¸¡à¸² â†’ Update Redux State
- Re-render UI à¸•à¸²à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆ

**Security**:
- Password à¹ƒà¸Šà¹‰ bcrypt hash
- API à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸”à¹‰à¸§à¸¢ JWT Authentication
- DTO Validation à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ invalid data
- CORS à¹€à¸›à¸´à¸”à¹€à¸‰à¸à¸²à¸° Frontend URL

**Persistence**:
- Frontend: localStorage (cart, auth, checkout)
- Backend: MongoDB (users, products, orders)
